import{ad as P,bu as E,K as I,aO as T,P as u,Q as m,c as e,R as a,bv as N,S as i,Z as s,aQ as n,y as d,b7 as k,b8 as p,bw as _,U as $,J as g,V as v,x as S,bm as z,_ as w,aP as A,ai as U,T as j}from"./index.3c7869e1.js";import{f as M}from"./furnitureDetailes.6230694d.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{V as b,a as o}from"./VRow.626ad208.js";import{V as L}from"./VSpacer.e4a2d732.js";import{V as y}from"./VContainer.64861989.js";import{V as D,c as h,a as R}from"./VCard.28f18870.js";import{V as J}from"./VForm.81443d4b.js";import{V as G}from"./VSnackbar.0755965c.js";import{V as O}from"./VDialog.6570dd15.js";import{V as Q}from"./VCardText.4efe58ee.js";const x=P("dataTable",{persist:!0,state:()=>({furnitures:[]}),getters:{getDataTableItemsCount(t){return t.furnitures.length}},actions:{async loadFurnitures(){this.LoaddingSpinner=!0;try{let t=await fetch("http://localhost:3001/furnitures",{headers:{Authorization:void 0}});this.furnitures=await t.json(),this.LoaddingSpinner=!1,console.log(this.furnitures)}catch(t){console.error("Loadding Field",t.code)}},trucate(t,l=20){return(t==null?void 0:t.length)<=l?t:(t==null?void 0:t.substring(0,l))+"..."},removeFurnitures(t){E.delete(`http://localhost:3001/furnitures/${t}`),this.furnitures=this.furnitures.filter(l=>l.id!==t)}}});const K={data:()=>({snackbar:!1,dialog:!1,id:0,title:"",price:0,description:"",category:"",thumbnail:null,uploadedThumbnail:"",isThumbnailValidate:!1,formDataErr:!1,formDataErrMsg:""}),computed:{...I(x,["furnitures","getDataTableItemsCount"])},created(){this.loadFurnitures()},methods:{...T(x,["loadFurnitures","removeFurnitures","trucate"]),...T(M,["showDetailes"]),closeDialog(){this.dialog=!1,this.title="",this.price="",this.description="",this.category="",this.uploadedThumbnail=null},validateFileExtensions(t){let f=document.getElementById(t).value;return!!/(\.jpg|\.png|\.jpeg|\.gif)$/i.exec(f)},createImage(t){let l=new FileReader;l.onload=f=>{this.uploadedThumbnail=f.target.result},l.readAsDataURL(t)},removeImage(){this.uploadedThumbnail="",setTimeout(()=>{this.validateFurnitureThumbnail()},500)},validateFurnitureThumbnail(){this.$refs.thumbnail.files[0]?this.validateFileExtensions("furnitureThumbnail")==!0?(this.formDataErr=!1,this.isThumbnailValidate=!0,this.formDataErrMsg="",this.createImage(this.$refs.thumbnail.files[0])):(this.formDataErr=!0,this.isThumbnailValidate=!1,this.formDataErrMsg="furniture Thumbnail has to  be : Jpg, PNG ,Jpeg or Gif"):(this.formDataErr=!0,this.isThumbnailValidate=!1,this.formDataErrMsg="Must Select thumbnail furniture !")},addNewProduct(){const t=new FormData;t.append("thumbnail",this.uploadedThumbnail),!this.title||!this.price||!this.description||!this.category||!this.uploadedThumbnail?(alert("Please Check the Entries"),this.snackbar=!1,this.dialog=!0):this.axios.post("http://localhost:3001/furnitures",{id:this.furnitures.length+1,title:this.title,price:this.price,description:this.description,category:this.category,thumbnail:this.uploadedThumbnail},t).then(l=>{this.furnitures.push(l.data),console.log(l.data),this.title="",this.price="",this.description="",this.category="",this.uploadedThumbnail=null}).catch(l=>{console.log(l),alert("Error Loading Product !")})}}},Z={class:"text-h5 ml-2"},q=s("p",{class:"my-5 text-h4 font-weight-bold text-center"}," Add New Product ",-1),H={key:0},W={key:0,class:"err-feedback"},X=s("br",null,null,-1),Y={key:1},ee={class:"text-success"},te=s("thead",null,[s("tr",null,[s("th",{class:"bg-grey-darken-4 text-center text-h6"},"id"),s("th",{class:"bg-grey-darken-4 text-center text-h6"},"Name Product"),s("th",{class:"bg-grey-darken-4 text-center text-h6"},"Price"),s("th",{class:"bg-grey-darken-4 text-center text-h6"},"description"),s("th",{class:"bg-grey-darken-4 text-center text-h6"},"category"),s("th",{class:"bg-grey-darken-4 text-center text-h6"},"Thumbnail"),s("th",{class:"bg-grey-darken-4 text-center text-h6"},"Actions")])],-1),le={class:"text-body-1 font-weight-bold"},ae=s("small",null,"$",-1),re={class:"d-lg-flex justify-space-evenly align-items-center"};function se(t,l,f,C,oe,c){return u(),m(w,null,[e(y,null,{default:a(()=>[e(b,{align:"center",justify:"center"},{default:a(()=>[e(o,{cols:"12",lg:"4",sm:"12"},{default:a(()=>[e(N,{class:"text-h6 font-weight-bold pa-5",variant:"outlined"},{default:a(()=>[i(" Number of Products: "),s("span",Z,n(t.getDataTableItemsCount),1)]),_:1})]),_:1}),e(L),e(o,{cols:"12",lg:"2",sm:"12"},{default:a(()=>[e(d,{"prepend-icon":"mdi-plus",color:"black",class:"mt-5 text-capitalize",onClick:l[0]||(l[0]=r=>t.dialog=!0)},{default:a(()=>[i(" Add New Product ")]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{modelValue:t.dialog,"onUpdate:modelValue":l[12]||(l[12]=r=>t.dialog=r),width:"auto",persistent:""},{default:a(()=>[e(y,null,{default:a(()=>[e(b,{align:"center",justify:"center"},{default:a(()=>[e(o,{cols:"12",lg:"12",sm:"12"},{default:a(()=>[e(D,{class:"border px-5"},{default:a(()=>[e(d,{icon:"mdi-close",size:"30",variant:"tonal",class:"mt-5",onClick:l[1]||(l[1]=k(r=>c.closeDialog(),["prevent"]))}),e(h,null,{default:a(()=>[q]),_:1}),e(y,null,{default:a(()=>[e(J,null,{default:a(()=>[e(b,{justify:"center",align:"center"},{default:a(()=>[e(o,{cols:"12",lg:"6",sm:"6"},{default:a(()=>[e(p,{modelValue:t.title,"onUpdate:modelValue":l[2]||(l[2]=r=>t.title=r),label:"Product Name",color:"yellow",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",lg:"6",sm:"6"},{default:a(()=>[e(p,{modelValue:t.price,"onUpdate:modelValue":l[3]||(l[3]=r=>t.price=r),"prepend-inner-icon":"",label:"price",color:"yellow",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",lg:"6",sm:"6"},{default:a(()=>[e(p,{modelValue:t.description,"onUpdate:modelValue":l[4]||(l[4]=r=>t.description=r),label:"Description",color:"yellow",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",lg:"6",sm:"6"},{default:a(()=>[e(p,{modelValue:t.category,"onUpdate:modelValue":l[5]||(l[5]=r=>t.category=r),type:"text","prepend-inner-icon":"",label:"category",color:"yellow",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",lg:"6",sm:"6",align:"center"},{default:a(()=>[t.uploadedThumbnail?(u(),m("div",Y,[s("span",ee,[e(g,{icon:"mdi-check-circle"}),i(" Uploaded Furniture Thumbnail: ")]),e(v,{src:t.uploadedThumbnail,alt:"uploaded thumbnail",width:"150","aspect-ratio":"1"},null,8,["src"]),e(d,{title:"Delete Image",class:"bg-red text-capitalize my-2",onClick:l[9]||(l[9]=r=>c.removeImage())},{default:a(()=>[i(" Remove Thumbnail ")]),_:1})])):(u(),m("div",H,[s("input",{type:"file",id:"furnitureThumbnail",placeholder:"Furniture Image",ref:"thumbnail",class:_({"form-data-err":t.formDataErr}),onChange:l[6]||(l[6]=r=>c.validateFurnitureThumbnail()),onInput:l[7]||(l[7]=r=>c.validateFurnitureThumbnail()),onClick:l[8]||(l[8]=r=>c.validateFurnitureThumbnail())},null,34),t.formDataErr?(u(),m("span",W,[X,i(" "+n(t.formDataErrMsg),1)])):$("",!0)]))]),_:1}),e(o,{cols:"12",lg:"8",sm:"12"},{default:a(()=>[e(G,{modelValue:t.snackbar,"onUpdate:modelValue":l[11]||(l[11]=r=>t.snackbar=r),timeout:2500,color:"yellow-accent-4",elevation:"24",location:"right bottom"},{activator:a(({props:r})=>[e(d,S(r,{block:"",color:"white",class:"ma-2 bg-yellow text-capitalize",onClick:l[10]||(l[10]=k(V=>(t.dialog=!1,c.addNewProduct()),["prevent"]))}),{default:a(()=>[i(" Add New Product ")]),_:2},1040)]),default:a(()=>[i(" Product added successfully. ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(y,null,{default:a(()=>[e(b,{align:"center",justify:"center",class:""},{default:a(()=>[e(o,{cols:"12",lg:"12",sm:"12"},{default:a(()=>[e(z,{"fixed-header":"",height:"900",class:"text-center"},{default:a(()=>[te,s("tbody",null,[(u(!0),m(w,null,A(t.furnitures,(r,V)=>(u(),m("tr",{key:r.id,class:_([V%2==0?"bg-grey-lighten-5":"bg-white"])},[s("td",null,[s("p",le,n(r.id),1)]),s("td",null,[e(h,{class:"text-body-1 text-center font-weight-bold"},{default:a(()=>[i(n(r.title),1)]),_:2},1024)]),s("td",null,[e(h,{class:"text-body-1 text-center font-weight-bold"},{default:a(()=>[ae,i("\u2022"),s("b",null,n(r.price),1)]),_:2},1024)]),s("td",null,[e(h,{class:"text-body-1 text-center"},{default:a(()=>[i(n(t.trucate(r.description)),1)]),_:2},1024)]),s("td",null,[e(h,{class:"text-center text-black-lighten-1"},{default:a(()=>[i(n(r.category),1)]),_:2},1024)]),s("td",null,[e(v,{src:r.thumbnail,"lazy-src":r.thumbnail,"aspect-ratio":"1",alt:"img",width:"100"},null,8,["src","lazy-src"])]),s("td",null,[s("div",re,[e(d,{title:"Remove Product",class:"d-block",color:"red-darken-2",variant:"tonal"},{default:a(()=>[e(g,{icon:"mdi-delete-empty"}),e(U,{activator:"parent","location-strategy":"connected","scroll-strategy":"block"},{default:a(()=>[e(D,{align:"center"},{default:a(()=>[e(h,null,{default:a(()=>[e(g,{size:"x-large",class:"my-8 pa-8 text-red-darken-1 border rounded-pill",icon:"mdi-delete-empty"})]),_:1}),e(Q,{class:"mb-8"},{default:a(()=>[i(" Are you Sure Delete Product from your cart ? ")]),_:1}),e(R,{class:"mb-8"},{default:a(()=>[e(d,{class:"bg-red",onClick:F=>t.removeFurnitures(r.id)},{default:a(()=>[i(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(d,{class:"",title:"Product Detailes",color:"black",variant:"outlined",to:{name:"productDetailes",params:{id:r.id}},onClick:F=>t.showDetailes(r)},{default:a(()=>[e(g,{icon:"mdi-arrow-right"})]),_:2},1032,["to","onClick"])])])],2))),128))])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ie=B(K,[["render",se]]),Ve={__name:"DataTableView",setup(t){return(l,f)=>(u(),j(ie))}};export{Ve as default};
